C51 COMPILER V9.60.0.0   LED                                                               03/04/2023 22:14:33 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN .\Objects\Led.obj
COMPILER INVOKED BY: E:\keil5\keil5\C51\BIN\C51.EXE ..\Driver\Led.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Driver;..\Config;
                    -..\System;..\User) DEBUG OBJECTEXTEND PRINT(.\Listings\Led.lst) OBJECT(.\Objects\Led.obj)

line level    source

   1          #include "Led.h"
   2          
   3          
   4          
   5          unsigned char code Led_Number[] = {
   6                  0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90
   7          };
   8          
   9          unsigned char Led_Buff[8] = {
  10                  0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  11          };
  12          
  13          unsigned int temp = 0;
  14          unsigned char parm = 25;
  15          
  16          unsigned char Show_Mode = 0;
  17          
  18          unsigned int DAC_Number = 0;
  19          
  20          void SmgDisplay()
  21          {
  22   1              static unsigned char i = 0;
  23   1              
  24   1              P0 = 0x00;
  25   1              HC138Y(6);
  26   1              P0 = 0x01 << i; 
  27   1              HC138Y(0);
  28   1              
  29   1              P0 = 0xFF;
  30   1              HC138Y(7);
  31   1              P0 = Led_Buff[i];
  32   1              HC138Y(0);
  33   1              
  34   1              i++;
  35   1              if(i > 7)
  36   1              {
  37   2                      i = 0;
  38   2              }       
  39   1      }
  40          
  41          void LedMode()
  42          {
  43   1              
  44   1              P0 = 0xFF;
  45   1              if(DAC_Mode == 0)
  46   1              {
  47   2                      HC138Y(4);
  48   2                      LED0 = 0;
  49   2                      HC138Y(0);
  50   2              }
  51   1              else
  52   1              {
  53   2                      HC138Y(4);
  54   2                      LED0 = 1;
C51 COMPILER V9.60.0.0   LED                                                               03/04/2023 22:14:33 PAGE 2   

  55   2                      HC138Y(0);              
  56   2              }
  57   1              
  58   1              if(Show_Mode == 0)
  59   1              {
  60   2                      HC138Y(4);
  61   2                      LED1 = 0;
  62   2                      LED2 = 1;
  63   2                      LED3 = 1;
  64   2                      HC138Y(0);                      
  65   2              }
  66   1              else if(Show_Mode == 1)
  67   1              {
  68   2                      HC138Y(4);
  69   2                      LED1 = 1;
  70   2                      LED2 = 0;
  71   2                      LED3 = 1;
  72   2                      HC138Y(0);              
  73   2              }
  74   1              else if(Show_Mode == 2)
  75   1              {
  76   2                      HC138Y(4);
  77   2                      LED1 = 1;
  78   2                      LED2 = 1;
  79   2                      LED3 = 0;
  80   2                      HC138Y(0);              
  81   2              }
  82   1      }
  83          
  84          void SmgShowMode()
  85          {
  86   1              if(Show_Mode == 0)
  87   1              {
  88   2                      SmgTemp();
  89   2              }
  90   1              else if(Show_Mode == 1)
  91   1              {
  92   2                      SmgParm();
  93   2              }
  94   1              else if(Show_Mode == 2)
  95   1              {
  96   2                      SmgDAC();
  97   2              }
  98   1              
  99   1      }
 100          
 101          
 102          void SmgTemp()
 103          {
 104   1              Led_Buff[0] = 0xC6;
 105   1              
 106   1              Led_Buff[1] = 0xFF;
 107   1              Led_Buff[2] = 0xFF;
 108   1              Led_Buff[3] = 0xFF;
 109   1              
 110   1              Led_Buff[4] = Led_Number[(temp/1000)%10];
 111   1              Led_Buff[5] = Led_Number[(temp/100)%10] & 0x7F;
 112   1              Led_Buff[6] = Led_Number[(temp/10)%10];
 113   1              Led_Buff[7] = Led_Number[temp%10];
 114   1      }
 115          
 116          void SmgParm()
C51 COMPILER V9.60.0.0   LED                                                               03/04/2023 22:14:33 PAGE 3   

 117          {
 118   1              Led_Buff[0] = 0x8C;
 119   1              
 120   1              Led_Buff[1] = 0xFF;
 121   1              Led_Buff[2] = 0xFF;
 122   1              Led_Buff[3] = 0xFF;     
 123   1              Led_Buff[4] = 0xFF;
 124   1              Led_Buff[5] = 0xFF;
 125   1              
 126   1              Led_Buff[6] = Led_Number[(parmbuf/10)%10];
 127   1              Led_Buff[7] = Led_Number[parmbuf%10];
 128   1      
 129   1      }
 130          
 131          void SmgDAC()
 132          {
 133   1              Led_Buff[0] = 0x8C;
 134   1              
 135   1              Led_Buff[1] = 0xFF;
 136   1              Led_Buff[2] = 0xFF;
 137   1              Led_Buff[3] = 0xFF;     
 138   1              Led_Buff[4] = 0xFF;
 139   1              
 140   1              Led_Buff[5] = Led_Number[(DAC_Number/100)%10] & 0x7F;
 141   1              Led_Buff[6] = Led_Number[(DAC_Number/10)%10];
 142   1              Led_Buff[7] = Led_Number[DAC_Number%10];
 143   1      }
 144          
 145          
 146          
 147          
 148          
 149          
 150          
 151          
 152          
 153          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    465    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     15    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
